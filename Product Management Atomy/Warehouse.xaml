<Window x:Class="Warehouse"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:bindValidation="clr-namespace:BindValidation;assembly=BindValidation"
    Title="Phiếu xuất" Height="768" Width="1020" ShowInTaskbar="False">
    <Window.Resources>
        <bindValidation:ValueConverter x:Key="valueConverter" />
        <ControlTemplate x:Key="ValidationTemplate">
            <DockPanel>
                <TextBlock Foreground="Red" FontSize="20">!</TextBlock>
                <AdornedElementPlaceholder/>
            </DockPanel>
        </ControlTemplate>
        <Style x:Key="TextBoxInError" TargetType="{x:Type TextBox}">
            <Style.Triggers>
                <Trigger Property="Validation.HasError" Value="true">
                    <Setter Property="ToolTip"
              Value="{Binding RelativeSource={x:Static RelativeSource.Self},
                              Path=(Validation.Errors)[0].ErrorContent}"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="120*"/>
            <ColumnDefinition Width="521*"/>
            <ColumnDefinition Width="371*"/>
        </Grid.ColumnDefinitions>
        <Label Content="(*)" HorizontalAlignment="Left" Margin="20,44,0,0" VerticalAlignment="Top" Foreground="Red" RenderTransformOrigin="0.5,2" Height="26" Width="22"/>
        <Label x:Name="lblEmpCode" HorizontalAlignment="Left" Margin="37,44,0,0" VerticalAlignment="Top" Height="26" Width="84" Grid.ColumnSpan="2">
            <Hyperlink x:Name="lnkEmpCode" Click="lnkEmpCode_Click">Mã nhân viên:</Hyperlink>
        </Label>
        <TextBox x:Name="txtEmpCode" HorizontalAlignment="Left" Height="23" Margin="3,44,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="120" Grid.Column="1"
                 LostFocus="txtEmpCode_LostFocus"
                 Style="{StaticResource TextBoxInError}">
            <TextBox.Text>
                <Binding Path ="EmpCode">
                    <Binding.ValidationRules>
                        <bindValidation:RequireRule  ValidatesOnTargetUpdated="True"/>
                        <bindValidation:NumericValidationRule TypeName="LeadingZeroNumber" ValidatesOnTargetUpdated="True"/>
                    </Binding.ValidationRules>
                </Binding>
            </TextBox.Text>
        </TextBox>
        <Label x:Name="lblEmpName" Content="{Binding EmpName}" HorizontalAlignment="Left" Margin="126,44,0,0" VerticalAlignment="Top" RenderTransformOrigin="0.957,1.077" Height="26" Width="320" Grid.Column="1"/>
        <Label Content="(*)" HorizontalAlignment="Left" Margin="13,72,0,0" VerticalAlignment="Top" Foreground="Red" RenderTransformOrigin="0.5,2" Height="26" Width="22"/>
        <Label x:Name="lblCusCd" HorizontalAlignment="Left" Margin="28,72,0,0" VerticalAlignment="Top" RenderTransformOrigin="0.957,1.077" Height="26" Width="94" Grid.ColumnSpan="2">
            <Hyperlink x:Name="lnkCusCd" Click="lnkCusCd_Click">Mã khách hàng:</Hyperlink>
        </Label>
        <TextBox x:Name="txtCusCd" HorizontalAlignment="Left" Height="23" Margin="3,72,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="120" Grid.Column="1"
                 LostFocus="txtCusCd_LostFocus"
                 Style="{StaticResource TextBoxInError}">
            <TextBox.Text>
                <Binding Path ="CusCode">
                    <Binding.ValidationRules>
                        <bindValidation:RequireRule  ValidatesOnTargetUpdated="True"/>
                        <bindValidation:NumericValidationRule TypeName="LeadingZeroNumber" ValidatesOnTargetUpdated="True"/>
                    </Binding.ValidationRules>
                </Binding>
            </TextBox.Text>
        </TextBox>
        <Label Content="(*)" HorizontalAlignment="Left" Margin="124,72,0,0" VerticalAlignment="Top" Foreground="Red" RenderTransformOrigin="0.5,2" Height="26" Width="22" Grid.Column="1"/>
        <Label x:Name="lblCusName" Content="Tên khách hàng:" HorizontalAlignment="Left" Margin="138,72,0,0" VerticalAlignment="Top" RenderTransformOrigin="0.957,1.077" Grid.Column="1" Height="26" Width="96"/>
        <TextBox x:Name="txtCusName" HorizontalAlignment="Left" Height="23" Margin="237,72,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="280" Grid.Column="1"
                 Style="{StaticResource TextBoxInError}">
            <TextBox.Text>
                <Binding Path ="CusName">
                    <Binding.ValidationRules>
                        <bindValidation:RequireRule  ValidatesOnTargetUpdated="True"/>
                    </Binding.ValidationRules>
                </Binding>
            </TextBox.Text>
        </TextBox>
        <Label x:Name="lblTitle" Content="Tiêu đề:" HorizontalAlignment="Left" Margin="71,100,0,0" VerticalAlignment="Top" RenderTransformOrigin="0.957,1.077" Height="26" Width="51" Grid.ColumnSpan="2"/>
        <TextBox x:Name="txtTitle" HorizontalAlignment="Left" Height="23" Margin="3,100,0,0" TextWrapping="Wrap" Text="{Binding Title, TargetNullValue=''}" VerticalAlignment="Top" Width="514" Grid.Column="1"/>
        <Label x:Name="lblDescription" Content="Diễn giải:" HorizontalAlignment="Left" Margin="63,128,0,0" VerticalAlignment="Top" RenderTransformOrigin="0.957,1.077" Height="26" Width="59" Grid.ColumnSpan="2"/>
        <TextBox x:Name="txtDescription" HorizontalAlignment="Left" Height="51" Margin="3,128,0,0" TextWrapping="Wrap" Text="{Binding Description, TargetNullValue=''}" VerticalAlignment="Top" Width="514" Grid.Column="1"/>
        <Label Content="(*)" HorizontalAlignment="Left" Margin="22,44,0,0" VerticalAlignment="Top" Foreground="Red" RenderTransformOrigin="0.5,2" Height="26" Width="22" Grid.Column="2"/>
        <Label x:Name="lblWareCode" Content="Số phiếu:" HorizontalAlignment="Left" Margin="37,44,0,0" VerticalAlignment="Top" RenderTransformOrigin="0.957,1.077" Grid.Column="2" Height="26" Width="61"/>
        <TextBox x:Name="txtWareCode" HorizontalAlignment="Left" Height="23" Margin="98,44,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="120" Grid.Column="2"
                 LostFocus="txtWareCode_LostFocus"
                 Style="{StaticResource TextBoxInError}">
            <TextBox.Text>
                <Binding Path ="WareCode">
                    <Binding.ValidationRules>
                        <bindValidation:RequireRule ValidatesOnTargetUpdated="True"/>
                        <bindValidation:NumericValidationRule TypeName="LeadingZeroNumber" ValidatesOnTargetUpdated="True"/>
                    </Binding.ValidationRules>
                </Binding>
            </TextBox.Text>
        </TextBox>
        <Label Content="(*)" HorizontalAlignment="Left" Margin="14,72,0,0" VerticalAlignment="Top" Foreground="Red" RenderTransformOrigin="0.5,2" Height="26" Width="22" Grid.Column="2"/>
        <Label x:Name="lblSetDate" Content="Ngày mua:" HorizontalAlignment="Left" Margin="29,72,0,0" VerticalAlignment="Top" RenderTransformOrigin="0.957,1.077" Grid.Column="2" Height="26" Width="67"/>
        <TextBox x:Name="txtSetDate" HorizontalAlignment="Left" Height="23" Margin="98,72,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="120" Grid.Column="2"
                 Style="{StaticResource TextBoxInError}">
            <TextBox.Text>
                <Binding Path ="SetDate">
                    <Binding.ValidationRules>
                        <bindValidation:RequireRule  ValidatesOnTargetUpdated="True"/>
                    </Binding.ValidationRules>
                </Binding>
            </TextBox.Text>
        </TextBox>
        <Label x:Name="lblTotalAmount" Content="Tổng tiền hàng:" HorizontalAlignment="Left" Margin="3,99,0,0" VerticalAlignment="Top" RenderTransformOrigin="0.957,1.077" Height="26" Width="93" Grid.Column="2"/>
        <TextBox x:Name="txtTotalAmount" HorizontalAlignment="Left" Height="23" Margin="98,100,0,0" TextWrapping="Wrap" Text="{Binding TotalAmount, TargetNullValue='0'}" VerticalAlignment="Top" Width="120" IsEnabled="False" Grid.Column="2"/>
        <Label Content="VND" HorizontalAlignment="Left" Margin="218,102,0,0" VerticalAlignment="Top" RenderTransformOrigin="0.957,1.077" Height="26" Width="34" Grid.Column="2"/>
        <Label Content="Viết bằng chữ:" HorizontalAlignment="Left" Margin="11,128,0,0" VerticalAlignment="Top" RenderTransformOrigin="0.957,1.077" Height="26" Width="88" Grid.Column="2"/>
        <Label x:Name="lblTotalAmountReading" Content="" HorizontalAlignment="Left" Margin="99,128,0,0" VerticalAlignment="Top" RenderTransformOrigin="0.957,1.077" Height="48" Width="261" Grid.Column="2"/>
        <DataGrid x:Name="grdWareHouse" HorizontalAlignment="Left" Height="280" Margin="28,198,0,0" VerticalAlignment="Top" Width="831" Grid.ColumnSpan="3" AutoGenerateColumns="False">
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding PropCode}" Header="Mã sản phẩm" Width="90"/>
                <DataGridTextColumn Binding="{Binding PropName}" Header="Tên sản phẩm" Width="300"/>
                <DataGridTextColumn Binding="{Binding Unit}" Header="Đơn vị tính" Width="100"/>
                <DataGridTextColumn Binding="{Binding Unit Price}" Header="Đơn giá" Width="100"/>
                <DataGridTextColumn Binding="{Binding Quantity}" Header="Số lượng" Width="80"/>
                <DataGridTextColumn Binding="{Binding Amount}" Header="Thành tiền" Width="Auto" MinWidth="120"/>
            </DataGrid.Columns>
        </DataGrid>
        <Label x:Name="lblComment" Content="Chú thích:" HorizontalAlignment="Left" Margin="59,497,0,0" VerticalAlignment="Top" Height="26" Width="63" Grid.ColumnSpan="2"/>
        <TextBox x:Name="txtComment" HorizontalAlignment="Left" Height="51" Margin="3,497,0,0" TextWrapping="Wrap" Text="{Binding Comments, TargetNullValue=''}" VerticalAlignment="Top" Width="514" Grid.Column="1"/>
        <Button x:Name="btnUpdate" Content="Cập nhật" HorizontalAlignment="Left" Margin="305,569,0,0" VerticalAlignment="Top" Width="75" Background="Blue" Foreground="White" BorderBrush="Blue" Height="31" Grid.Column="1"
                Click="btnUpdate_Click"/>
    </Grid>
</Window>
